
================================================================================
Example of an SDSoC platform with direct I/O

Although contrived, the structure of this platform demonstrates how to support
direct I/O in SDSoC.  This platform delivers input data to an application
through a pf_read() API and sends data from an application to output through a
pf_write() API.  Replace the "pf_read" and "pf_write" IP cores by platform I/O IPs
appropriate for your platform.

For testability as per the included pf_test program, the axi stream ports comply
with SDSoC data mover requirements, i.e., include TKEEP, TSTRB, TLAST, TUSER
signals. In practice this requirement should not be prohibitive, as you can
always create simple logic to create these sideband signals in an adapter.  For
example, TLAST can be generated by a simple state machine that counts data
according to the intended input/output packet size.

For more detail on SDSoC platform requirements, and on this design,
please refer to the Tutorial Chapter 4 in the
SDSoC_platforms_and_libraries.pdf document in the SDSoC docs
directory.

================================================================================

To build the platform: 
1. Create a vivado base system in a 'vivado' subdirectory 
   a. 'make vivado'

2. Create the SDSoC hardware platform specification
   a. 'hsi'
   b. 'open_hw_design vivado/pf_axis.sdk/pf_axis_wrapper.hdf'
   c. 'generate_target {sdi} [current_hw_design] -dir hsi'
   d. quit hsi: 'q' and 'cd ..'
   e. Open hsi/pf_axis.pfm in a text editor and add an 'xd:hasTlast="true"'
      attribute to the following elements
           <xd:busInterface xd:busInterfaceRef="wbuf" /> 
           <xd:busInterface xd:busInterfaceRef="rbuf" />
   
3. Create the pf_axis platform
   a. 'make pf_axis'
      1. Builds a library for the platform functions
      2. Creates pf_axis platform directory

   Note: this platform reuses the boot software from the zc702 platform

4. Test the platform
   a. 'make -C pf_test'
   b. cp pf_test/sd_card to an SD card
   c. Boot zc702 board from this SD card
   d. Connect to the board over a serial connection and run
      a.  '/mnt/pf_axis.elf'

